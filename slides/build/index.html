<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Prez</title>

    <meta name="description" content="-- DESCRIPTION HERE --">
    <meta name="author" content="jack">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="css/reveal.css">
    <link rel="stylesheet" href="css/theme/solarized.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="css/highlight/styles/zenburn.css" id="highlight-theme">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!-- INCLUDE CSS HERE -->

  </head>

  <body>

    <div class="reveal">
      <div class="slides"><section id="title" class="slide" data-has-notes="true">
<p><img src="images/this.gif" alt=""></p><aside class="notes"><p>Use <code>--such-notes</code> if they deserve better treatment.</p></aside>
</section>

<section id="whats-going-on-bind" class="slide" data-has-notes="false">
<h2>What is going on here?</h2><pre><code class="lang-js"><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Fabrice</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">PureComponent</span> </span>{
  <span class="hljs-keyword">constructor</span>() {
    <span class="hljs-keyword">this</span>.onKillSheep = <span class="hljs-keyword">this</span>.onKillSheep.bind(<span class="hljs-keyword">this</span>);
  }

  onKillSheep() {
    ...
</code></pre>
</section>

<section id="common-assumptions" class="slide" data-has-notes="false">
<h2>3 Common assumptions</h2><pre><code class="lang-js"><span class="hljs-keyword">var</span> hi = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
  <span class="hljs-keyword">this</span>.a = <span class="hljs-string">"'Ello"</span>;
};
</code></pre>
<ul>
<li><code>this</code> refers to the function itself - no.</li>
<li><code>this</code> refers to the function&#39;s scope - nope.</li>
</ul>
</section>

<section id="this" class="slide" data-has-notes="false">
<h2>4 <code>this</code></h2><ul>
<li><code>this</code> allows you to implicitly pass around different objects&#39; contexts</li>
<li>you could do this manually...</li>
</ul>
</section>

<section id="manually" class="slide" data-has-notes="false">
<h3>5 manually</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">identify</span>(<span class="hljs-params">context</span>) </span>{
    <span class="hljs-keyword">return</span> context.name.toUpperCase();
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">speak</span>(<span class="hljs-params">context</span>) </span>{
    <span class="hljs-keyword">var</span> greeting = <span class="hljs-string">"Hello, I'm "</span> + identify( context );
    <span class="hljs-built_in">console</span>.log( greeting );
}

<span class="hljs-keyword">var</span> me = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Jack"</span>
};

<span class="hljs-keyword">var</span> you = {
    <span class="hljs-attr">name</span>: <span class="hljs-string">"Nicolas"</span>
};

identify( you ); <span class="hljs-comment">// JACK</span>
speak( me ); <span class="hljs-comment">// Hello, I'm NICOLAS</span>
</code></pre>
</section>

<section id="theory" class="slide" data-has-notes="false">
<h3>6 theory</h3><ul>
<li><code>this</code> is a <em>run-time</em>, not <em>author-time</em>, binding</li>
<li>it is contextually based on the conditions of the function&#39;s <em>invocation</em> (how it is called), not how it is declared.</li>
</ul>
</section>

<section id="engine" class="slide" data-has-notes="false">
<h3>7 engine and sh*t</h3><ul>
<li>when a function is invoked, an <em>activation record</em> (a.k.a. an <em>execution context</em>) is created.</li>
<li>this contains info about:<ul>
<li>where the function was called from (call stack)</li>
<li>how the function was invoked</li>
<li>what parameters were passed</li>
<li>the <code>this</code> reference (used for the duration of the function&#39;s execution)</li>
</ul>
</li>
</ul>
</section>

<section id="call-site" class="slide" data-has-notes="false">
<h3>8 call site</h3><ul>
<li>to decipher what <code>this</code> refers too, we must understand the call-site - where it was called</li>
<li>look at the call stack (the stack of functions that have been called to get us to the current moment in execution)</li>
<li>The call-site we care about is in the invocation before the currently executing function (i.e. <em>where</em> it was called)</li>
</ul>
</section>

<section id="call-stack" class="slide" data-has-notes="false">
<h3>9 call stack</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">baz</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// call-stack is: `baz`</span>
    <span class="hljs-comment">// so, our call-site is in the global scope</span>

    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">"baz"</span> );
    bar(); <span class="hljs-comment">// &lt;-- call-site for `bar`</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bar</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// call-stack is: `baz` -&gt; `bar`</span>
    <span class="hljs-comment">// so, our call-site is in `baz`</span>

    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">"bar"</span> );
    foo(); <span class="hljs-comment">// &lt;-- call-site for `foo`</span>
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-comment">// call-stack is: `baz` -&gt; `bar` -&gt; `foo`</span>
    <span class="hljs-comment">// so, our call-site is in `bar`</span>

    <span class="hljs-built_in">console</span>.log( <span class="hljs-string">"foo"</span> );
}

baz(); <span class="hljs-comment">// &lt;-- call-site for `baz`</span>
</code></pre>
</section>

<section id="this-binding-rules" class="slide" data-has-notes="false">
<h3>10 <code>this</code> binding rules</h3><ol>
<li>Default binding</li>
<li>Implicit binding</li>
<li>Explicit binding</li>
<li><code>new</code> binding</li>
</ol>
</section>

<section id="default" class="slide" data-has-notes="false">
<h3>11 default binding</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">this</span>.a );
}

<span class="hljs-keyword">var</span> a = <span class="hljs-number">2</span>;

foo(); <span class="hljs-comment">// 2</span>
</code></pre>
<ul>
<li>variables declared in the global scope are synonymous with global-object
properties of the same name</li>
<li>default binding - <code>this</code> points at the global object</li>
</ul>
</section>

<section id="implicit" class="slide" data-has-notes="false">
<h3>12 implicit binding</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">this</span>.a );
}

<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">foo</span>: foo
};

obj.foo(); <span class="hljs-comment">// 2</span>
</code></pre>
<ul>
<li>the call-site uses the <code>obj</code> context to reference the function, so you could say that the <code>obj</code> object &quot;owns&quot; or &quot;contains&quot; the function reference at the time the function is called.</li>
</ul>
</section>

<section id="explicit" class="slide" data-has-notes="false">
<h3>13 explicit binding</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">this</span>.a );
}

<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>
};

foo.call( obj ); <span class="hljs-comment">// 2</span>
</code></pre>
<ul>
<li>invoking foo with explicit binding by <code>foo.call(..)</code> allows us to force its <code>this</code> to be <code>obj</code></li>
</ul>
</section>

<section id="hard" class="slide" data-has-notes="false">
<h3>14 explicit 2 - hard binding</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">something</span>) </span>{
    <span class="hljs-built_in">console</span>.log( <span class="hljs-keyword">this</span>.a, something );
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.a + something;
}

<span class="hljs-keyword">var</span> obj = {
    <span class="hljs-attr">a</span>: <span class="hljs-number">2</span>
};

<span class="hljs-keyword">var</span> bar = foo.bind( obj );

<span class="hljs-keyword">var</span> b = bar( <span class="hljs-number">3</span> ); <span class="hljs-comment">// 2 3</span>
<span class="hljs-built_in">console</span>.log( b ); <span class="hljs-comment">// 5</span>
</code></pre>
<ul>
<li><code>bind(..)</code> returns a new function that is hard-coded to call the original function with the <code>this</code> context set as you specified.</li>
</ul>
</section>

<section id="new" class="slide" data-has-notes="false">
<h3>15 new binding</h3><pre><code class="lang-js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span>(<span class="hljs-params">a</span>) </span>{
    <span class="hljs-keyword">this</span>.a = a;
}

<span class="hljs-keyword">var</span> bar = <span class="hljs-keyword">new</span> foo( <span class="hljs-number">2</span> );
<span class="hljs-built_in">console</span>.log( bar.a ); <span class="hljs-comment">// 2</span>
</code></pre>
<ul>
<li><code>new</code> is not class based OOP</li>
</ul>
</section>

<section id="new2" class="slide" data-has-notes="false">
<h3>16 new binding</h3><ul>
<li>what does <code>new</code> do?<ol>
<li>a brand new object is created (aka, constructed) out of thin air</li>
<li>the newly constructed object is [[Prototype]]-linked</li>
<li>the newly constructed object is set as the this binding for that function call</li>
<li>unless the function returns its own alternate object, the new-invoked function call will automatically return the newly constructed object.</li>
</ol>
</li>
</ul>
</section>

<section id="precedence" class="slide" data-has-notes="false">
<h3>17 precedence</h3><ul>
<li>default &lt; implicit &lt; explicit &lt; hard &lt; new</li>
</ul>
</section></div>
    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.js"></script>

    <script>
    // Full list of configuration options available at:
    // https://github.com/hakimel/reveal.js#configuration
    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      transition: Reveal.getQueryHash().transition || 'slide', // none/fade/slide/convex/concave/zoom

      // Optional reveal.js plugins
      dependencies: [
        //{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        //{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true },
        { src: 'plugin/notes/notes.js', async: true }
      ]
    });
    </script>

    <!-- INCLUDE JS HERE -->

  </body>
</html>
